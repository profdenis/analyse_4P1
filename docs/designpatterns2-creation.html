<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-03-27T18:41:42.478844527"><title>Design Patterns : Deuxi&egrave;me Partie | Help Instance</title><script type="application/json" id="virtual-toc-data">[{"id":"monteur-builder","level":0,"title":"Monteur (Builder)","anchor":"#monteur-builder"},{"id":"prototype","level":0,"title":"Prototype","anchor":"#prototype"},{"id":"singleton","level":0,"title":"Singleton","anchor":"#singleton"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Design Patterns : Deuxi&egrave;me Partie | Help Instance"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Help Instance Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/designpatterns2-creation.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Design Patterns : Deuxi&egrave;me Partie | Help Instance"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/designpatterns2-creation.html#webpage",
    "url": "writerside-documentation/designpatterns2-creation.html",
    "name": "Design Patterns : Deuxi&egrave;me Partie | Help Instance",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Help Instance Help"
}</script><!-- End Schema.org --></head><body data-id="DesignPatterns2_creation" data-main-title="Design Patterns : Deuxième Partie" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Patrons-de-conception.md|Patrons de conception"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Help Instance  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="DesignPatterns2_creation" id="DesignPatterns2_creation.md">Design Patterns : Deuxième Partie</h1><section class="chapter"><h2 id="monteur-builder" data-toc="monteur-builder">Monteur (<span class="emphasis" id="-dr4f98_3">Builder</span>)</h2><section class="chapter"><h3 id="intention_1" data-toc="intention_1">Intention</h3><p id="-dr4f98_4">Construire un objet complexe &eacute;tape par &eacute;tape.</p></section><section class="chapter"><h3 id="mise-en-contexte_1" data-toc="mise-en-contexte_1">Mise en contexte</h3><p id="-dr4f98_5">Diff&eacute;rence avec une fabrique abstraite :</p><ul class="list _bullet" id="-dr4f98_6"><li class="list__item" id="-dr4f98_7"><p><span class="control" id="-dr4f98_8">Fabrique abstraite</span>: construire des objets, <span class="emphasis" id="-dr4f98_9">simples</span> ou <span class="emphasis" id="-dr4f98_10">complexes</span>, d'une <span class="emphasis" id="-dr4f98_11">m&ecirc;me famille</span></p><ul class="list _bullet" id="-dr4f98_12"><li class="list__item" id="-dr4f98_13"><p>construire des <code class="code" id="-dr4f98_14">Shape</code>s de toutes sortes</p></li></ul></li><li class="list__item" id="-dr4f98_15"><p><span class="control" id="-dr4f98_16">Monteur</span>: construire un objet <span class="emphasis" id="-dr4f98_17">complexe &eacute;tape par &eacute;tape</span>. </p><ul class="list _bullet" id="-dr4f98_18"><li class="list__item" id="-dr4f98_19"><p>Construire des <code class="code" id="-dr4f98_20">Shape</code>s complexes compos&eacute;es de plusieurs autres formes</p></li></ul></li></ul></section><section class="chapter"><h3 id="d-tails_1" data-toc="d-tails_1">D&eacute;tails</h3><p id="-dr4f98_21">Exemple dans <a href="https://en.wikipedia.org/wiki/Design_Patterns" id="-dr4f98_22" data-external="true" rel="noopener noreferrer">GoF</a>: Labyrinthe.</p><p id="-dr4f98_23">Cr&eacute;er des labyrinthes &eacute;tape par &eacute;tape :</p><ol class="list _decimal" id="-dr4f98_24" type="1"><li class="list__item" id="-dr4f98_25"><p>Construire un labyrinthe vide</p></li><li class="list__item" id="-dr4f98_26"><p>Ajouter des salles</p></li><li class="list__item" id="-dr4f98_27"><p>Ajouter des portes</p></li><li class="list__item" id="-dr4f98_28"><p>etc.</p></li></ol><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="235px" preserveAspectRatio="none" style="width:134px;height:235px;background:#FFFFFF;" version="1.1" viewBox="0 0 134 235" width="134px" zoomAndPan="magnify"><defs/><g><!--class MazeBuilder--><g id="elem_MazeBuilder"><rect codeLine="1" fill="#F1F1F1" height="113.1875" id="MazeBuilder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="7" y="7"/><ellipse cx="22" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M22.1094,18.3438 L20.9531,23.4219 L23.2813,23.4219 L22.1094,18.3438 Z M20.625,16.1094 L23.6094,16.1094 L26.9688,28.5 L24.5156,28.5 L23.75,25.4375 L20.4688,25.4375 L19.7188,28.5 L17.2813,28.5 L20.625,16.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="88" x="36" y="27.8467">MazeBuilder</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="126" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="126" y1="47" y2="47"/><ellipse cx="18" cy="60.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="27" y="63.9951">BuildMaze()</text><ellipse cx="18" cy="76.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="88" x="27" y="80.292">BuildRoom()</text><ellipse cx="18" cy="93.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="27" y="96.5889">BuildDoor()</text><ellipse cx="18" cy="109.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="72" x="27" y="112.8857">GetMaze()</text></g><!--class Maze--><g id="elem_Maze"><rect codeLine="8" fill="#F1F1F1" height="48" id="Maze" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="32.5" y="180"/><ellipse cx="47.5" cy="196" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M50.4688,201.6406 Q49.8906,201.9375 49.25,202.0781 Q48.6094,202.2344 47.9063,202.2344 Q45.4063,202.2344 44.0781,200.5938 Q42.7656,198.9375 42.7656,195.8125 Q42.7656,192.6875 44.0781,191.0313 Q45.4063,189.375 47.9063,189.375 Q48.6094,189.375 49.25,189.5313 Q49.9063,189.6875 50.4688,189.9844 L50.4688,192.7031 Q49.8438,192.125 49.25,191.8594 Q48.6563,191.5781 48.0313,191.5781 Q46.6875,191.5781 46,192.6563 Q45.3125,193.7188 45.3125,195.8125 Q45.3125,197.9063 46,198.9844 Q46.6875,200.0469 48.0313,200.0469 Q48.6563,200.0469 49.25,199.7813 Q49.8438,199.5 50.4688,198.9219 L50.4688,201.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="61.5" y="200.8467">Maze</text><line style="stroke:#181818;stroke-width:0.5;" x1="33.5" x2="100.5" y1="212" y2="212"/><line style="stroke:#181818;stroke-width:0.5;" x1="33.5" x2="100.5" y1="220" y2="220"/></g><!--link MazeBuilder to Maze--><g id="link_MazeBuilder_Maze"><path codeLine="10" d="M67,120.04 C67,140.96 67,157.62 67,173.96 " fill="none" id="MazeBuilder-to-Maze" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="67,179.96,71,170.96,67,174.96,63,170.96,67,179.96" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[IqmgBYbAJ2vHy4siIdKgpSn9IIrIgEPIKD2kJeHArIg0nK4AD3InoGJbv-TYbt79po_2a75FBO6QLSl5bPoJM5mCjXneQoqNiYjqTUt04W00]--></g></svg></div><p id="-dr4f98_30"><span class="control" id="-dr4f98_31">Notes</span>:</p><ol class="list _decimal" id="-dr4f98_32" type="1"><li class="list__item" id="-dr4f98_33"><p>On pourrait avoir beaucoup plus de m&eacute;thodes que celles donn&eacute;es pour les labyrinthes complexes.</p></li><li class="list__item" id="-dr4f98_34"><p>Il faudrait &eacute;videmment ajuster les signatures de ces m&eacute;thodes pour y ajouter des param&egrave;tres.</p></li><li class="list__item" id="-dr4f98_35"><p>Il n'est pas obligatoire d'avoir une classe et des m&eacute;thodes abstraites. On pourrait avoir seulement des classes et m&eacute;thodes concr&egrave;tes, avec la possibilit&eacute; d'avoir des m&eacute;thodes vides au besoin.</p></li></ol></section></section><section class="chapter"><h2 id="prototype" data-toc="prototype">Prototype</h2><section class="chapter"><h3 id="intention_2" data-toc="intention_2">Intention</h3><p id="-dr4f98_37">Sp&eacute;cifier les types d'objets &agrave; cr&eacute;er en utilisant une instance prototype, et cr&eacute;er de nouveaux objets en copiant ce prototype.</p></section><section class="chapter"><h3 id="mise-en-contexte_2" data-toc="mise-en-contexte_2">Mise en contexte</h3><p id="-dr4f98_38"><span class="control" id="-dr4f98_39">Application principale</span>: cloner des objets, comme pour un copier-coller.</p></section><section class="chapter"><h3 id="d-tails_2" data-toc="d-tails_2">D&eacute;tails</h3><p id="-dr4f98_40">Selon les besoins, on peut effectuer une copie en <span class="emphasis" id="-dr4f98_41">surface</span> ou en <span class="emphasis" id="-dr4f98_42">profondeur</span> d'un objet prototype.</p><ul class="list _bullet" id="-dr4f98_43"><li class="list__item" id="-dr4f98_44"><p><span class="control" id="-dr4f98_45">Copie de surface</span> (<span class="emphasis" id="-dr4f98_46">shallow copy</span>): </p><ul class="list _bullet" id="-dr4f98_47"><li class="list__item" id="-dr4f98_48"><p>seulement les r&eacute;f&eacute;rences aux attributs ou propri&eacute;t&eacute;s sont copi&eacute;s, donc le clone va partager des r&eacute;f&eacute;rences aux m&ecirc;mes objets avec l'objet original (&agrave; condition &eacute;videmment d'avoir des attributs ou propri&eacute;t&eacute;s de type r&eacute;f&eacute;rence dans l'objet)</p></li><li class="list__item" id="-dr4f98_49"><p>si les objets partag&eacute;s sont modifi&eacute;s, alors l'objet original et ses clones vont voir les modifications</p></li></ul></li><li class="list__item" id="-dr4f98_50"><p><span class="control" id="-dr4f98_51">Copie en profondeur</span> (<span class="emphasis" id="-dr4f98_52">deep copy</span>): </p><ul class="list _bullet" id="-dr4f98_53"><li class="list__item" id="-dr4f98_54"><p>les attributs et propri&eacute;t&eacute;s de type r&eacute;f&eacute;rence sont, eux aussi, clon&eacute;s, donc les r&eacute;f&eacute;rences du clone seront vers des objets diff&eacute;rents, mais avec le m&ecirc;me contenu, que l'objet original</p></li><li class="list__item" id="-dr4f98_55"><p>pour une copie en profondeur compl&egrave;te, il faut effectuer une copie en profondeur sur tous les attributs et propri&eacute;t&eacute;s de type r&eacute;f&eacute;rence r&eacute;cursivement</p></li></ul></li></ul><p id="-dr4f98_56">En C#, il a diff&eacute;rentes fa&ccedil;ons de cloner des objets</p><ol class="list _decimal" id="-dr4f98_57" type="1"><li class="list__item" id="-dr4f98_58"><p><code class="code" id="-dr4f98_59">Object.MemberwiseClone()</code>: copie de surface</p></li><li class="list__item" id="-dr4f98_60"><p><code class="code" id="-dr4f98_61">ICloneable.Clone()</code>: copie de surface ou profonde, selon les besoins</p></li><li class="list__item" id="-dr4f98_62"><p>Constructeur de copie : </p><ul class="list _bullet" id="-dr4f98_63"><li class="list__item" id="-dr4f98_64"><p>copie de surface ou profonde, selon les besoins</p></li><li class="list__item" id="-dr4f98_65"><p>un constructeur de copie est un constructeur qui accepte un seul param&egrave;tre, du m&ecirc;me type que la classe</p></li><li class="list__item" id="-dr4f98_66"><p>exemple : <code class="code" id="-dr4f98_67">public Circle(Circle circle)</code></p></li></ul></li></ol></section></section><section class="chapter"><h2 id="singleton" data-toc="singleton">Singleton</h2><section class="chapter"><h3 id="intention" data-toc="intention">Intention</h3><p id="-dr4f98_69">S'assurer qu'une classe ne peut avoir qu'une seule instance.</p></section><section class="chapter"><h3 id="mise-en-contexte" data-toc="mise-en-contexte">Mise en contexte</h3><p id="-dr4f98_70">Dans certaines applications, il n'est pas logique d'avoir plusieurs instances d'une classe. Comme dans une application avec interface graphique (mobile ou bureau), il n'est souvent pas logique d'avoir plus d'une fen&ecirc;tre principale.</p><p id="-dr4f98_71">Dans d'autres applications, il faut s'assurer de bien g&eacute;rer les resources pour &eacute;viter d'avoir des applications trop gourmandes en termes de m&eacute;moire ou de processeur ou de r&eacute;seau ... Comme dans une application qui utilise une base de donn&eacute;es, on ne peut avoir qu'un seul pool de connexions &agrave; la base de donn&eacute;es. Avoir plusieurs pools de connexions serait plus difficile &agrave; g&eacute;rer et consommerait plus de resources.</p><p id="-dr4f98_72">Ou il faut bien synchroniser l'acc&egrave;s &agrave; une resource partag&eacute;e pour &eacute;viter de la corrompre. Les applications avec plusieurs fils d'ex&eacute;cution (avec des <span class="emphasis" id="-dr4f98_73">thread</span> ou avec des <code class="code" id="-dr4f98_74">asynch</code>/<code class="code" id="-dr4f98_75">await</code>) ont normalement besoin de partager certaines structures de donn&eacute;es en m&eacute;moire, et de synchroniser leur utilisation de ces structures.</p></section><section class="chapter"><h3 id="d-tails" data-toc="d-tails">D&eacute;tails</h3><ol class="list _decimal" id="-dr4f98_76" type="1"><li class="list__item" id="-dr4f98_77"><p>On peut mettre tous les constructeurs d'une classe en mode d'acc&egrave;s priv&eacute; (ou potentiellement prot&eacute;g&eacute;), ce qui emp&ecirc;chera d'autres classes de cr&eacute;er des instances de cette classe.</p></li><li class="list__item" id="-dr4f98_78"><p>Ensuite, on ajoute un attribut priv&eacute; statique pour contenir la r&eacute;f&eacute;rence &agrave; l'unique instance</p></li><li class="list__item" id="-dr4f98_79"><p>La m&eacute;thode statique <code class="code" id="-dr4f98_80">GetInstance</code> doit retourner la r&eacute;f&eacute;rence &agrave; l'unique instance. La premi&egrave;re fois, l'attribut priv&eacute; statique sera <code class="code" id="-dr4f98_81">null</code>, donc on devra cr&eacute;er l'unique instance au premier appel de <code class="code" id="-dr4f98_82">GetInstance</code>, et la placer dans l'attribut pr&eacute;vu &agrave; cet effet, avant de retourner la r&eacute;f&eacute;rence &agrave; l'unique instance.</p></li><li class="list__item" id="-dr4f98_83"><p>Alternativement, on pourrait utiliser une propri&eacute;t&eacute; avec un <span class="emphasis" id="-dr4f98_84">getter</span> public qui ferait le m&ecirc;me travail de la m&eacute;thode <code class="code" id="-dr4f98_85">GetInstance</code>, et un <span class="emphasis" id="-dr4f98_86">setter</span> priv&eacute; qui serait utilis&eacute; seulement par le <span class="emphasis" id="-dr4f98_87">getter</span> lors de sa premi&egrave;re utilisation.</p></li><li class="list__item" id="-dr4f98_88"><p>Une autre option serait d'utiliser un <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-constructors" id="-dr4f98_89" data-external="true" rel="noopener noreferrer">constructeur statique en C#</a>, ou un <a href="https://www.c-sharpcorner.com/UploadFile/3614a6/static-initialization-block-in-java/" id="-dr4f98_90" data-external="true" rel="noopener noreferrer">bloc d'initialisation statique</a> dans d'autres langages.</p></li></ol></section></section><div class="last-modified">Last modified: 27 mars 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="designpatterns1-shapefactory.html" class="navigation-links__prev">Design Patterns : Premi&egrave;re Partie</a><a href="designpatterns3-structuraux.html" class="navigation-links__next">Design Patterns : Structuraux</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>