<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-04-26T09:54:57.768513018"><title>Exemple : ORDBMS | Help Instance</title><script type="application/json" id="virtual-toc-data">[{"id":"contacts-normalis-s","level":0,"title":"Contacts normalisés","anchor":"#contacts-normalis-s"},{"id":"contacts-d-normalis-s","level":0,"title":"Contacts dénormalisés","anchor":"#contacts-d-normalis-s"},{"id":"types-d-finis-par-les-utilisateurs","level":0,"title":"Types définis par les utilisateurs","anchor":"#types-d-finis-par-les-utilisateurs"},{"id":"jsonb-la-place-de-tableaux","level":0,"title":"JSONB à la place de tableaux","anchor":"#jsonb-la-place-de-tableaux"},{"id":"sch-ma-relationnel-avec-les-types-de-contact","level":0,"title":"Schéma relationnel avec les types de contact","anchor":"#sch-ma-relationnel-avec-les-types-de-contact"},{"id":"comment-traitons-nous-les-relations-plusieurs-plusieurs","level":0,"title":"Comment traitons-nous les relations plusieurs à plusieurs ?","anchor":"#comment-traitons-nous-les-relations-plusieurs-plusieurs"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Exemple : ORDBMS | Help Instance"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Help Instance Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/exemple-ordbms.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Exemple : ORDBMS | Help Instance"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/exemple-ordbms.html#webpage",
    "url": "writerside-documentation/exemple-ordbms.html",
    "name": "Exemple : ORDBMS | Help Instance",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Help Instance Help"
}</script><!-- End Schema.org --></head><body data-id="Exemple-ORDBMS" data-main-title="Exemple : ORDBMS" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Conception-detaillee.md|Conception détaillée///Modeles-de-donnees.md|Modèles de données"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Help Instance  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Exemple-ORDBMS" id="Exemple-ORDBMS.md">Exemple : ORDBMS</h1><p id="tgi0pp_1638"><span class="emphasis" id="tgi0pp_1639">ORDBMS</span>: Object-Relational DBMS</p><section class="chapter"><h2 id="contacts-normalis-s" data-toc="contacts-normalis-s">Contacts normalis&eacute;s</h2><section class="chapter"><h3 id="contacts1-sch-ma-relationnel" data-toc="contacts1-sch-ma-relationnel"><code class="code" id="tgi0pp_1641">contacts1</code> Sch&eacute;ma relationnel</h3><div class="code-block" data-lang="sql">
DROP SCHEMA IF EXISTS contacts1 CASCADE;
CREATE SCHEMA contacts1;
SET search_path TO contacts1;

CREATE TABLE users (
    uid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    username VARCHAR(15) NOT NULL,
    email TEXT NOT NULL,
    firstname TEXT,
    lastname TEXT,
    emergency_contact TEXT
);
</div><div class="code-block" data-lang="sql">
INSERT INTO users (username, email, emergency_contact)
    VALUES ('denis', 'denis.rinfret@example.com', 'help@example.com'),
            ('minh', 'minh@example.com', 'contact@example.com');
</div><div class="code-block" data-lang="sql">
SELECT * FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1645"><thead><tr class="ijRowHead" id="tgi0pp_1646"><th id="tgi0pp_1647"><p>uid</p></th><th id="tgi0pp_1648"><p>username</p></th><th id="tgi0pp_1649"><p>email</p></th><th id="tgi0pp_1650"><p>firstname</p></th><th id="tgi0pp_1651"><p>lastname</p></th><th id="tgi0pp_1652"><p>emergency_contact</p></th></tr></thead><tbody><tr id="tgi0pp_1653"><td id="tgi0pp_1654"><p>1</p></td><td id="tgi0pp_1655"><p>denis</p></td><td id="tgi0pp_1656"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1657"><p>None</p></td><td id="tgi0pp_1658"><p>None</p></td><td id="tgi0pp_1659"><p>help@example.com</p></td></tr><tr id="tgi0pp_1660"><td id="tgi0pp_1661"><p>2</p></td><td id="tgi0pp_1662"><p>minh</p></td><td id="tgi0pp_1663"><p>minh@example.com</p></td><td id="tgi0pp_1664"><p>None</p></td><td id="tgi0pp_1665"><p>None</p></td><td id="tgi0pp_1666"><p>contact@example.com</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="que-devons-nous-faire-pour-permettre-un-utilisateur-d-avoir-plus-d-un-contact" data-toc="que-devons-nous-faire-pour-permettre-un-utilisateur-d-avoir-plus-d-un-contact">Que devons-nous faire pour permettre &agrave; un utilisateur d'avoir plus d'un contact ?</h3><ol class="list _decimal" id="tgi0pp_1667" type="1"><li class="list__item" id="tgi0pp_1668"><p>Si le nombre de contacts est fixe, disons <code class="code" id="tgi0pp_1669">n</code> contacts, alors nous pourrions avoir <code class="code" id="tgi0pp_1670">n</code> colonnes de contacts, tant que <code class="code" id="tgi0pp_1671">n</code> est petit.</p></li><li class="list__item" id="tgi0pp_1672"><p>Mais si <code class="code" id="tgi0pp_1673">n</code> n'est pas petit ou si <code class="code" id="tgi0pp_1674">n</code> est inconnu, alors nous devons avoir une autre table, une table contacts, pour pr&eacute;server la premi&egrave;re forme normale.</p></li><li class="list__item" id="tgi0pp_1675"><p>La premi&egrave;re forme normale stipule que chaque valeur de colonne doit &ecirc;tre atomique.</p></li></ol></section><section class="chapter"><h3 id="contacts2-sch-ma-relationnel" data-toc="contacts2-sch-ma-relationnel"><code class="code" id="tgi0pp_1677">contacts2</code> Sch&eacute;ma relationnel</h3><div class="code-block" data-lang="sql">
DROP SCHEMA IF EXISTS contacts2 CASCADE;
CREATE SCHEMA contacts2;
SET search_path TO contacts2;

CREATE TABLE users (
    uid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    username VARCHAR(15) NOT NULL,
    email TEXT NOT NULL,
    firstname TEXT,
    lastname TEXT
);

CREATE TABLE contacts (
    cid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    email TEXT NOT NULL,
    uid INTEGER REFERENCES users(uid)
)
</div><div class="code-block" data-lang="sql">
 INSERT INTO users (username, email)
    VALUES ('denis', 'denis.rinfret@example.com'),
            ('minh', 'minh@example.com');

INSERT INTO contacts (email, uid) 
    VALUES ('help@example.com', 1), ('minh@example.com', 1), 
        ('contact@example.com', 2) , ('ha@example.com', 2);
    
</div><div class="code-block" data-lang="sql">
SELECT * FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1681"><thead><tr class="ijRowHead" id="tgi0pp_1682"><th id="tgi0pp_1683"><p>uid</p></th><th id="tgi0pp_1684"><p>username</p></th><th id="tgi0pp_1685"><p>email</p></th><th id="tgi0pp_1686"><p>firstname</p></th><th id="tgi0pp_1687"><p>lastname</p></th></tr></thead><tbody><tr id="tgi0pp_1688"><td id="tgi0pp_1689"><p>1</p></td><td id="tgi0pp_1690"><p>denis</p></td><td id="tgi0pp_1691"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1692"><p>None</p></td><td id="tgi0pp_1693"><p>None</p></td></tr><tr id="tgi0pp_1694"><td id="tgi0pp_1695"><p>2</p></td><td id="tgi0pp_1696"><p>minh</p></td><td id="tgi0pp_1697"><p>minh@example.com</p></td><td id="tgi0pp_1698"><p>None</p></td><td id="tgi0pp_1699"><p>None</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT * FROM contacts;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1701"><thead><tr class="ijRowHead" id="tgi0pp_1702"><th id="tgi0pp_1703"><p>cid</p></th><th id="tgi0pp_1704"><p>email</p></th><th id="tgi0pp_1705"><p>uid</p></th></tr></thead><tbody><tr id="tgi0pp_1706"><td id="tgi0pp_1707"><p>1</p></td><td id="tgi0pp_1708"><p>help@example.com</p></td><td id="tgi0pp_1709"><p>1</p></td></tr><tr id="tgi0pp_1710"><td id="tgi0pp_1711"><p>2</p></td><td id="tgi0pp_1712"><p>minh@example.com</p></td><td id="tgi0pp_1713"><p>1</p></td></tr><tr id="tgi0pp_1714"><td id="tgi0pp_1715"><p>3</p></td><td id="tgi0pp_1716"><p>contact@example.com</p></td><td id="tgi0pp_1717"><p>2</p></td></tr><tr id="tgi0pp_1718"><td id="tgi0pp_1719"><p>4</p></td><td id="tgi0pp_1720"><p>ha@example.com</p></td><td id="tgi0pp_1721"><p>2</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="jointure-n-cessaire-pour-obtenir-toutes-les-donn-es" data-toc="jointure-n-cessaire-pour-obtenir-toutes-les-donn-es">Jointure n&eacute;cessaire pour obtenir toutes les donn&eacute;es</h3><div class="code-block" data-lang="sql">
SELECT * FROM users u INNER JOIN contacts c ON u.uid = c.uid;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1723"><thead><tr class="ijRowHead" id="tgi0pp_1724"><th id="tgi0pp_1725"><p>uid</p></th><th id="tgi0pp_1726"><p>username</p></th><th id="tgi0pp_1727"><p>email</p></th><th id="tgi0pp_1728"><p>firstname</p></th><th id="tgi0pp_1729"><p>lastname</p></th><th id="tgi0pp_1730"><p>cid</p></th><th id="tgi0pp_1731"><p>email_1</p></th><th id="tgi0pp_1732"><p>uid_1</p></th></tr></thead><tbody><tr id="tgi0pp_1733"><td id="tgi0pp_1734"><p>1</p></td><td id="tgi0pp_1735"><p>denis</p></td><td id="tgi0pp_1736"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1737"><p>None</p></td><td id="tgi0pp_1738"><p>None</p></td><td id="tgi0pp_1739"><p>1</p></td><td id="tgi0pp_1740"><p>help@example.com</p></td><td id="tgi0pp_1741"><p>1</p></td></tr><tr id="tgi0pp_1742"><td id="tgi0pp_1743"><p>1</p></td><td id="tgi0pp_1744"><p>denis</p></td><td id="tgi0pp_1745"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1746"><p>None</p></td><td id="tgi0pp_1747"><p>None</p></td><td id="tgi0pp_1748"><p>2</p></td><td id="tgi0pp_1749"><p>minh@example.com</p></td><td id="tgi0pp_1750"><p>1</p></td></tr><tr id="tgi0pp_1751"><td id="tgi0pp_1752"><p>2</p></td><td id="tgi0pp_1753"><p>minh</p></td><td id="tgi0pp_1754"><p>minh@example.com</p></td><td id="tgi0pp_1755"><p>None</p></td><td id="tgi0pp_1756"><p>None</p></td><td id="tgi0pp_1757"><p>3</p></td><td id="tgi0pp_1758"><p>contact@example.com</p></td><td id="tgi0pp_1759"><p>2</p></td></tr><tr id="tgi0pp_1760"><td id="tgi0pp_1761"><p>2</p></td><td id="tgi0pp_1762"><p>minh</p></td><td id="tgi0pp_1763"><p>minh@example.com</p></td><td id="tgi0pp_1764"><p>None</p></td><td id="tgi0pp_1765"><p>None</p></td><td id="tgi0pp_1766"><p>4</p></td><td id="tgi0pp_1767"><p>ha@example.com</p></td><td id="tgi0pp_1768"><p>2</p></td></tr></tbody></table></div><ol class="list _decimal" id="tgi0pp_1769" type="1"><li class="list__item" id="tgi0pp_1770"><p>Les jointures peuvent &ecirc;tre lentes.</p></li><li class="list__item" id="tgi0pp_1771"><p>Mais sans normalisation, les donn&eacute;es peuvent &ecirc;tre redondantes et des anomalies peuvent appara&icirc;tre.</p></li><li class="list__item" id="tgi0pp_1772"><p>Une SGDB <code class="code" id="tgi0pp_1773">object-relationalle</code> (SGBDOR, ou ORDBMS) peut aider.</p></li></ol></section></section><section class="chapter"><h2 id="contacts-d-normalis-s" data-toc="contacts-d-normalis-s">Contacts d&eacute;normalis&eacute;s</h2><section class="chapter"><h3 id="contacts3-sch-ma-objet-relationnel" data-toc="contacts3-sch-ma-objet-relationnel"><code class="code" id="tgi0pp_1775">contacts3</code> Sch&eacute;ma objet-relationnel</h3><div class="code-block" data-lang="sql">
DROP SCHEMA IF EXISTS contacts3 CASCADE;
CREATE SCHEMA contacts3;
SET search_path TO contacts3;

CREATE TABLE users (
    uid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    username VARCHAR(15) NOT NULL,
    email TEXT NOT NULL,
    firstname TEXT,
    lastname TEXT,
    emergency_contacts TEXT[]
);
</div><div class="code-block" data-lang="sql">
INSERT INTO users (username, email, emergency_contacts)
VALUES ('denis', 'denis.rinfret@example.com',
        ARRAY ['help@example.com', 'minh@example.com']),
       ('minh', 'minh@example.com',
        ARRAY ['contact@example.com', 'ha@example.com']);
</div><div class="code-block" data-lang="sql">
SELECT uid, emergency_contacts FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1779"><thead><tr class="ijRowHead" id="tgi0pp_1780"><th id="tgi0pp_1781"><p>uid</p></th><th id="tgi0pp_1782"><p>emergency_contacts</p></th></tr></thead><tbody><tr id="tgi0pp_1783"><td id="tgi0pp_1784"><p>1</p></td><td id="tgi0pp_1785"><p>[&quot;help@example.com&quot;, &quot;minh@example.com&quot;]</p></td></tr><tr id="tgi0pp_1786"><td id="tgi0pp_1787"><p>2</p></td><td id="tgi0pp_1788"><p>[&quot;contact@example.com&quot;, &quot;ha@example.com&quot;]</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT uid, username, email, firstname, lastname, 
        unnest(emergency_contacts) 
FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1790"><thead><tr class="ijRowHead" id="tgi0pp_1791"><th id="tgi0pp_1792"><p>uid</p></th><th id="tgi0pp_1793"><p>username</p></th><th id="tgi0pp_1794"><p>email</p></th><th id="tgi0pp_1795"><p>firstname</p></th><th id="tgi0pp_1796"><p>lastname</p></th><th id="tgi0pp_1797"><p>unnest</p></th></tr></thead><tbody><tr id="tgi0pp_1798"><td id="tgi0pp_1799"><p>1</p></td><td id="tgi0pp_1800"><p>denis</p></td><td id="tgi0pp_1801"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1802"><p>None</p></td><td id="tgi0pp_1803"><p>None</p></td><td id="tgi0pp_1804"><p>help@example.com</p></td></tr><tr id="tgi0pp_1805"><td id="tgi0pp_1806"><p>1</p></td><td id="tgi0pp_1807"><p>denis</p></td><td id="tgi0pp_1808"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1809"><p>None</p></td><td id="tgi0pp_1810"><p>None</p></td><td id="tgi0pp_1811"><p>minh@example.com</p></td></tr><tr id="tgi0pp_1812"><td id="tgi0pp_1813"><p>2</p></td><td id="tgi0pp_1814"><p>minh</p></td><td id="tgi0pp_1815"><p>minh@example.com</p></td><td id="tgi0pp_1816"><p>None</p></td><td id="tgi0pp_1817"><p>None</p></td><td id="tgi0pp_1818"><p>contact@example.com</p></td></tr><tr id="tgi0pp_1819"><td id="tgi0pp_1820"><p>2</p></td><td id="tgi0pp_1821"><p>minh</p></td><td id="tgi0pp_1822"><p>minh@example.com</p></td><td id="tgi0pp_1823"><p>None</p></td><td id="tgi0pp_1824"><p>None</p></td><td id="tgi0pp_1825"><p>ha@example.com</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-les-utilisateurs-avec-un-courriel-sp-cifique-comme-premier-contact-d-urgence" data-toc="trouver-les-utilisateurs-avec-un-courriel-sp-cifique-comme-premier-contact-d-urgence">Trouver les utilisateurs avec un courriel sp&eacute;cifique comme premier contact d'urgence</h3><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE emergency_contacts[1] = 'help@example.com';
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1827"><thead><tr class="ijRowHead" id="tgi0pp_1828"><th id="tgi0pp_1829"><p>uid</p></th><th id="tgi0pp_1830"><p>username</p></th><th id="tgi0pp_1831"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1832"><td id="tgi0pp_1833"><p>1</p></td><td id="tgi0pp_1834"><p>denis</p></td><td id="tgi0pp_1835"><p>denis.rinfret@example.com</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-un-utilisateur-avec-un-courriel-sp-cifique-comme-contact-d-urgence-n-importe-quelle-position" data-toc="trouver-un-utilisateur-avec-un-courriel-sp-cifique-comme-contact-d-urgence-n-importe-quelle-position">Trouver un utilisateur avec un courriel sp&eacute;cifique comme contact d'urgence (n'importe quelle position)</h3><div class="code-block" data-lang="sql">
 
SELECT uid, username, email
FROM users
WHERE 'ha@example.com' = ANY (emergency_contacts);
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1837"><thead><tr class="ijRowHead" id="tgi0pp_1838"><th id="tgi0pp_1839"><p>uid</p></th><th id="tgi0pp_1840"><p>username</p></th><th id="tgi0pp_1841"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1842"><td id="tgi0pp_1843"><p>2</p></td><td id="tgi0pp_1844"><p>minh</p></td><td id="tgi0pp_1845"><p>minh@example.com</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-les-utilisateurs-qui-sont-list-s-comme-contact-d-urgence-d-autres-utilisateurs" data-toc="trouver-les-utilisateurs-qui-sont-list-s-comme-contact-d-urgence-d-autres-utilisateurs">Trouver les utilisateurs qui sont list&eacute;s comme contact d'urgence d'autres utilisateurs</h3><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE email IN (SELECT unnest(emergency_contacts) 
                FROM users);
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1847"><thead><tr class="ijRowHead" id="tgi0pp_1848"><th id="tgi0pp_1849"><p>uid</p></th><th id="tgi0pp_1850"><p>username</p></th><th id="tgi0pp_1851"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1852"><td id="tgi0pp_1853"><p>2</p></td><td id="tgi0pp_1854"><p>minh</p></td><td id="tgi0pp_1855"><p>minh@example.com</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT distinct uid, username, email
FROM users
         INNER JOIN
     (SELECT unnest(emergency_contacts) AS emergency_email
      FROM users) AS all_contacts 
         ON email = emergency_email;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1857"><thead><tr class="ijRowHead" id="tgi0pp_1858"><th id="tgi0pp_1859"><p>uid</p></th><th id="tgi0pp_1860"><p>username</p></th><th id="tgi0pp_1861"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1862"><td id="tgi0pp_1863"><p>2</p></td><td id="tgi0pp_1864"><p>minh</p></td><td id="tgi0pp_1865"><p>minh@example.com</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="sans-unnest-ni-sous-requ-tes" data-toc="sans-unnest-ni-sous-requ-tes">Sans <code class="code" id="tgi0pp_1867">unnest</code> ni sous-requ&ecirc;tes</h3><div class="code-block" data-lang="sql">
SELECT u1.uid, u1.username, u1.email
FROM users u1 INNER JOIN users u2 
     ON u1.email =ANY (u2.emergency_contacts);
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1869"><thead><tr class="ijRowHead" id="tgi0pp_1870"><th id="tgi0pp_1871"><p>uid</p></th><th id="tgi0pp_1872"><p>username</p></th><th id="tgi0pp_1873"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1874"><td id="tgi0pp_1875"><p>2</p></td><td id="tgi0pp_1876"><p>minh</p></td><td id="tgi0pp_1877"><p>minh@example.com</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="types-d-finis-par-les-utilisateurs" data-toc="types-d-finis-par-les-utilisateurs">Types d&eacute;finis par les utilisateurs</h2><p id="tgi0pp_1878">User-Defined Types (UDT)</p><section class="chapter"><h3 id="contacts4-sch-ma-objet-relationnel" data-toc="contacts4-sch-ma-objet-relationnel"><code class="code" id="tgi0pp_1880">contacts4</code> Sch&eacute;ma objet-relationnel</h3><div class="code-block" data-lang="sql">
DROP SCHEMA IF EXISTS contacts4 CASCADE;
CREATE SCHEMA contacts4;
SET search_path TO contacts4;

CREATE TYPE contact_type AS ENUM ('emergency', 'friend', 
                                  'family', 'colleague');

CREATE TYPE contact AS (
    email TEXT,
    type contact_type
);
</div><div class="code-block" data-lang="sql">
CREATE TABLE users (
    uid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    username VARCHAR(15) NOT NULL,
    email TEXT NOT NULL,
    firstname TEXT,
    lastname TEXT, 
    contacts contact[]
);
</div><div class="code-block" data-lang="sql">
INSERT INTO users (username, email, contacts)
    VALUES ('denis', 'denis.rinfret@example.com', 
            ARRAY[('help@example.com', 'emergency')::contact, 
                  ('minh@example.com', 'friend')::contact]),
            ('minh', 'minh@example.com', 
             ARRAY[('contact@example.com', 'family')::contact, 
                   ('ha@example.com', 'colleague')::contact]);
</div><div class="code-block" data-lang="sql">
SELECT uid, contacts FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1885"><thead><tr class="ijRowHead" id="tgi0pp_1886"><th id="tgi0pp_1887"><p>uid</p></th><th id="tgi0pp_1888"><p>contacts</p></th></tr></thead><tbody><tr id="tgi0pp_1889"><td id="tgi0pp_1890"><p>1</p></td><td id="tgi0pp_1891"><p>{&quot;(help@example.com,emergency)&quot;,&quot;(minh@example.com,friend)&quot;}</p></td></tr><tr id="tgi0pp_1892"><td id="tgi0pp_1893"><p>2</p></td><td id="tgi0pp_1894"><p>{&quot;(contact@example.com,family)&quot;,&quot;(ha@example.com,colleague)&quot;}</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT uid, username, email, 
    (unnest(contacts)::contact).*
FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1896"><thead><tr class="ijRowHead" id="tgi0pp_1897"><th id="tgi0pp_1898"><p>uid</p></th><th id="tgi0pp_1899"><p>username</p></th><th id="tgi0pp_1900"><p>email</p></th><th id="tgi0pp_1901"><p>email_1</p></th><th id="tgi0pp_1902"><p>type</p></th></tr></thead><tbody><tr id="tgi0pp_1903"><td id="tgi0pp_1904"><p>1</p></td><td id="tgi0pp_1905"><p>denis</p></td><td id="tgi0pp_1906"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1907"><p>help@example.com</p></td><td id="tgi0pp_1908"><p>emergency</p></td></tr><tr id="tgi0pp_1909"><td id="tgi0pp_1910"><p>1</p></td><td id="tgi0pp_1911"><p>denis</p></td><td id="tgi0pp_1912"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1913"><p>minh@example.com</p></td><td id="tgi0pp_1914"><p>friend</p></td></tr><tr id="tgi0pp_1915"><td id="tgi0pp_1916"><p>2</p></td><td id="tgi0pp_1917"><p>minh</p></td><td id="tgi0pp_1918"><p>minh@example.com</p></td><td id="tgi0pp_1919"><p>contact@example.com</p></td><td id="tgi0pp_1920"><p>family</p></td></tr><tr id="tgi0pp_1921"><td id="tgi0pp_1922"><p>2</p></td><td id="tgi0pp_1923"><p>minh</p></td><td id="tgi0pp_1924"><p>minh@example.com</p></td><td id="tgi0pp_1925"><p>ha@example.com</p></td><td id="tgi0pp_1926"><p>colleague</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT uid, username, email, 
        (unnest(contacts)::contact).email AS contact_email, 
        (unnest(contacts)::contact).type AS contact_type 
FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1928"><thead><tr class="ijRowHead" id="tgi0pp_1929"><th id="tgi0pp_1930"><p>uid</p></th><th id="tgi0pp_1931"><p>username</p></th><th id="tgi0pp_1932"><p>email</p></th><th id="tgi0pp_1933"><p>contact_email</p></th><th id="tgi0pp_1934"><p>contact_type</p></th></tr></thead><tbody><tr id="tgi0pp_1935"><td id="tgi0pp_1936"><p>1</p></td><td id="tgi0pp_1937"><p>denis</p></td><td id="tgi0pp_1938"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1939"><p>help@example.com</p></td><td id="tgi0pp_1940"><p>emergency</p></td></tr><tr id="tgi0pp_1941"><td id="tgi0pp_1942"><p>1</p></td><td id="tgi0pp_1943"><p>denis</p></td><td id="tgi0pp_1944"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1945"><p>minh@example.com</p></td><td id="tgi0pp_1946"><p>friend</p></td></tr><tr id="tgi0pp_1947"><td id="tgi0pp_1948"><p>2</p></td><td id="tgi0pp_1949"><p>minh</p></td><td id="tgi0pp_1950"><p>minh@example.com</p></td><td id="tgi0pp_1951"><p>contact@example.com</p></td><td id="tgi0pp_1952"><p>family</p></td></tr><tr id="tgi0pp_1953"><td id="tgi0pp_1954"><p>2</p></td><td id="tgi0pp_1955"><p>minh</p></td><td id="tgi0pp_1956"><p>minh@example.com</p></td><td id="tgi0pp_1957"><p>ha@example.com</p></td><td id="tgi0pp_1958"><p>colleague</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-tous-les-contacts-d-urgence-d-un-utilisateur" data-toc="trouver-tous-les-contacts-d-urgence-d-un-utilisateur">Trouver tous les contacts d'urgence d'un utilisateur</h3><div class="code-block" data-lang="sql">
SELECT *
FROM (SELECT uid, username, email, 
        (unnest(contacts)::contact).email AS contact_email, 
        (unnest(contacts)::contact).type AS contact_type 
      FROM users) AS temp
WHERE contact_type = 'emergency';
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1960"><thead><tr class="ijRowHead" id="tgi0pp_1961"><th id="tgi0pp_1962"><p>uid</p></th><th id="tgi0pp_1963"><p>username</p></th><th id="tgi0pp_1964"><p>email</p></th><th id="tgi0pp_1965"><p>contact_email</p></th><th id="tgi0pp_1966"><p>contact_type</p></th></tr></thead><tbody><tr id="tgi0pp_1967"><td id="tgi0pp_1968"><p>1</p></td><td id="tgi0pp_1969"><p>denis</p></td><td id="tgi0pp_1970"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_1971"><p>help@example.com</p></td><td id="tgi0pp_1972"><p>emergency</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-les-utilisateurs-sans-contacts-d-urgence" data-toc="trouver-les-utilisateurs-sans-contacts-d-urgence">Trouver les utilisateurs sans contacts d'urgence</h3><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE 'emergency' NOT IN (SELECT (unnest(contacts)::contact).type);
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1974"><thead><tr class="ijRowHead" id="tgi0pp_1975"><th id="tgi0pp_1976"><p>uid</p></th><th id="tgi0pp_1977"><p>username</p></th><th id="tgi0pp_1978"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1979"><td id="tgi0pp_1980"><p>2</p></td><td id="tgi0pp_1981"><p>minh</p></td><td id="tgi0pp_1982"><p>minh@example.com</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE 'emergency' !=ALL (SELECT (unnest(contacts)::contact).type);
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1984"><thead><tr class="ijRowHead" id="tgi0pp_1985"><th id="tgi0pp_1986"><p>uid</p></th><th id="tgi0pp_1987"><p>username</p></th><th id="tgi0pp_1988"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_1989"><td id="tgi0pp_1990"><p>2</p></td><td id="tgi0pp_1991"><p>minh</p></td><td id="tgi0pp_1992"><p>minh@example.com</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="jsonb-la-place-de-tableaux" data-toc="jsonb-la-place-de-tableaux">JSONB &agrave; la place de tableaux</h2><section class="chapter"><h3 id="contacts5-sch-ma-objet-relationnel" data-toc="contacts5-sch-ma-objet-relationnel"><code class="code" id="tgi0pp_1994">contacts5</code> Sch&eacute;ma objet-relationnel</h3><div class="code-block" data-lang="sql">
DROP SCHEMA IF EXISTS contacts5 CASCADE;
CREATE SCHEMA contacts5;
SET search_path TO contacts5;

CREATE TABLE users (
    uid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    username VARCHAR(15) NOT NULL,
    email TEXT NOT NULL,
    firstname TEXT,
    lastname TEXT, 
    contacts jsonb
);
</div><div class="code-block" data-lang="sql">
INSERT INTO users (username, email, contacts)
    VALUES ('denis', 'denis.rinfret@example.com', 
            '{&quot;emergency&quot;: &quot;help@example.com&quot;, &quot;friend&quot;: &quot;minh@example.com&quot;}'),
            ('minh', 'minh@example.com', 
            '{&quot;family&quot;: &quot;contact@example.com&quot;, &quot;colleague&quot;: &quot;ha@example.com&quot;}');
</div><div class="code-block" data-lang="sql">
SELECT uid, contacts FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_1998"><thead><tr class="ijRowHead" id="tgi0pp_1999"><th id="tgi0pp_2000"><p>uid</p></th><th id="tgi0pp_2001"><p>contacts</p></th></tr></thead><tbody><tr id="tgi0pp_2002"><td id="tgi0pp_2003"><p>1</p></td><td id="tgi0pp_2004"><p>{&quot;friend&quot;: &quot;minh@example.com&quot;, &quot;emergency&quot;: &quot;help@example.com&quot;}</p></td></tr><tr id="tgi0pp_2005"><td id="tgi0pp_2006"><p>2</p></td><td id="tgi0pp_2007"><p>{&quot;family&quot;: &quot;contact@example.com&quot;, &quot;colleague&quot;: &quot;ha@example.com&quot;}</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-les-utilisateurs-avec-au-moins-un-contact-d-urgence" data-toc="trouver-les-utilisateurs-avec-au-moins-un-contact-d-urgence">Trouver les utilisateurs avec au moins un contact d'urgence</h3><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE 'emergency' IN (SELECT jsonb_object_keys(contacts));
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2009"><thead><tr class="ijRowHead" id="tgi0pp_2010"><th id="tgi0pp_2011"><p>uid</p></th><th id="tgi0pp_2012"><p>username</p></th><th id="tgi0pp_2013"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_2014"><td id="tgi0pp_2015"><p>1</p></td><td id="tgi0pp_2016"><p>denis</p></td><td id="tgi0pp_2017"><p>denis.rinfret@example.com</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE contacts ? 'emergency';
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2019"><thead><tr class="ijRowHead" id="tgi0pp_2020"><th id="tgi0pp_2021"><p>uid</p></th><th id="tgi0pp_2022"><p>username</p></th><th id="tgi0pp_2023"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_2024"><td id="tgi0pp_2025"><p>1</p></td><td id="tgi0pp_2026"><p>denis</p></td><td id="tgi0pp_2027"><p>denis.rinfret@example.com</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT uid, username, email, contacts-&gt;'emergency' AS emergency
FROM users
WHERE contacts ? 'emergency';
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2029"><thead><tr class="ijRowHead" id="tgi0pp_2030"><th id="tgi0pp_2031"><p>uid</p></th><th id="tgi0pp_2032"><p>username</p></th><th id="tgi0pp_2033"><p>email</p></th><th id="tgi0pp_2034"><p>emergency</p></th></tr></thead><tbody><tr id="tgi0pp_2035"><td id="tgi0pp_2036"><p>1</p></td><td id="tgi0pp_2037"><p>denis</p></td><td id="tgi0pp_2038"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_2039"><p>help@example.com</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="trouver-les-utilisateurs-sans-contacts-d-urgence_1" data-toc="trouver-les-utilisateurs-sans-contacts-d-urgence_1">Trouver les utilisateurs sans contacts d'urgence</h3><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE NOT(contacts ? 'emergency');
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2041"><thead><tr class="ijRowHead" id="tgi0pp_2042"><th id="tgi0pp_2043"><p>uid</p></th><th id="tgi0pp_2044"><p>username</p></th><th id="tgi0pp_2045"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_2046"><td id="tgi0pp_2047"><p>2</p></td><td id="tgi0pp_2048"><p>minh</p></td><td id="tgi0pp_2049"><p>minh@example.com</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="sch-ma-relationnel-avec-les-types-de-contact" data-toc="sch-ma-relationnel-avec-les-types-de-contact">Sch&eacute;ma relationnel avec les types de contact</h2><section class="chapter"><h3 id="contacts6-relational-schema" data-toc="contacts6-relational-schema"><code class="code" id="tgi0pp_2051">contacts6</code> Relational Schema</h3><div class="code-block" data-lang="sql">
DROP SCHEMA IF EXISTS contacts6 CASCADE;
CREATE SCHEMA contacts6;
SET search_path TO contacts6;

CREATE TABLE users (
    uid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    username VARCHAR(15) NOT NULL,
    email TEXT NOT NULL,
    firstname TEXT,
    lastname TEXT
);
</div><div class="code-block" data-lang="sql">
CREATE TYPE contact_type AS ENUM ('emergency', 'friend', 
                                  'family', 'colleague');

CREATE TABLE contacts (
    cid INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    email TEXT NOT NULL,
    type contact_type NOT NULL,
    uid INTEGER REFERENCES users(uid)
);
</div><div class="code-block" data-lang="sql">
INSERT INTO users (username, email)
    VALUES ('denis', 'denis.rinfret@example.com'),
            ('minh', 'minh@example.com');

INSERT INTO contacts (email, type, uid) 
    VALUES ('help@example.com', 'emergency', 1), ('minh@example.com', 'friend', 1), 
        ('contact@example.com', 'colleague', 2) , ('ha@example.com', 'family', 2);
</div><div class="code-block" data-lang="sql">
SELECT * FROM users;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2056"><thead><tr class="ijRowHead" id="tgi0pp_2057"><th id="tgi0pp_2058"><p>uid</p></th><th id="tgi0pp_2059"><p>username</p></th><th id="tgi0pp_2060"><p>email</p></th><th id="tgi0pp_2061"><p>firstname</p></th><th id="tgi0pp_2062"><p>lastname</p></th></tr></thead><tbody><tr id="tgi0pp_2063"><td id="tgi0pp_2064"><p>1</p></td><td id="tgi0pp_2065"><p>denis</p></td><td id="tgi0pp_2066"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_2067"><p>None</p></td><td id="tgi0pp_2068"><p>None</p></td></tr><tr id="tgi0pp_2069"><td id="tgi0pp_2070"><p>2</p></td><td id="tgi0pp_2071"><p>minh</p></td><td id="tgi0pp_2072"><p>minh@example.com</p></td><td id="tgi0pp_2073"><p>None</p></td><td id="tgi0pp_2074"><p>None</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT * FROM contacts;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2076"><thead><tr class="ijRowHead" id="tgi0pp_2077"><th id="tgi0pp_2078"><p>cid</p></th><th id="tgi0pp_2079"><p>email</p></th><th id="tgi0pp_2080"><p>type</p></th><th id="tgi0pp_2081"><p>uid</p></th></tr></thead><tbody><tr id="tgi0pp_2082"><td id="tgi0pp_2083"><p>1</p></td><td id="tgi0pp_2084"><p>help@example.com</p></td><td id="tgi0pp_2085"><p>emergency</p></td><td id="tgi0pp_2086"><p>1</p></td></tr><tr id="tgi0pp_2087"><td id="tgi0pp_2088"><p>2</p></td><td id="tgi0pp_2089"><p>minh@example.com</p></td><td id="tgi0pp_2090"><p>friend</p></td><td id="tgi0pp_2091"><p>1</p></td></tr><tr id="tgi0pp_2092"><td id="tgi0pp_2093"><p>3</p></td><td id="tgi0pp_2094"><p>contact@example.com</p></td><td id="tgi0pp_2095"><p>colleague</p></td><td id="tgi0pp_2096"><p>2</p></td></tr><tr id="tgi0pp_2097"><td id="tgi0pp_2098"><p>4</p></td><td id="tgi0pp_2099"><p>ha@example.com</p></td><td id="tgi0pp_2100"><p>family</p></td><td id="tgi0pp_2101"><p>2</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT *
FROM users u
         INNER JOIN contacts c ON u.uid = c.uid;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2103"><thead><tr class="ijRowHead" id="tgi0pp_2104"><th id="tgi0pp_2105"><p>uid</p></th><th id="tgi0pp_2106"><p>username</p></th><th id="tgi0pp_2107"><p>email</p></th><th id="tgi0pp_2108"><p>firstname</p></th><th id="tgi0pp_2109"><p>lastname</p></th><th id="tgi0pp_2110"><p>cid</p></th><th id="tgi0pp_2111"><p>email_1</p></th><th id="tgi0pp_2112"><p>type</p></th><th id="tgi0pp_2113"><p>uid_1</p></th></tr></thead><tbody><tr id="tgi0pp_2114"><td id="tgi0pp_2115"><p>1</p></td><td id="tgi0pp_2116"><p>denis</p></td><td id="tgi0pp_2117"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_2118"><p>None</p></td><td id="tgi0pp_2119"><p>None</p></td><td id="tgi0pp_2120"><p>1</p></td><td id="tgi0pp_2121"><p>help@example.com</p></td><td id="tgi0pp_2122"><p>emergency</p></td><td id="tgi0pp_2123"><p>1</p></td></tr><tr id="tgi0pp_2124"><td id="tgi0pp_2125"><p>1</p></td><td id="tgi0pp_2126"><p>denis</p></td><td id="tgi0pp_2127"><p>denis.rinfret@example.com</p></td><td id="tgi0pp_2128"><p>None</p></td><td id="tgi0pp_2129"><p>None</p></td><td id="tgi0pp_2130"><p>2</p></td><td id="tgi0pp_2131"><p>minh@example.com</p></td><td id="tgi0pp_2132"><p>friend</p></td><td id="tgi0pp_2133"><p>1</p></td></tr><tr id="tgi0pp_2134"><td id="tgi0pp_2135"><p>2</p></td><td id="tgi0pp_2136"><p>minh</p></td><td id="tgi0pp_2137"><p>minh@example.com</p></td><td id="tgi0pp_2138"><p>None</p></td><td id="tgi0pp_2139"><p>None</p></td><td id="tgi0pp_2140"><p>3</p></td><td id="tgi0pp_2141"><p>contact@example.com</p></td><td id="tgi0pp_2142"><p>colleague</p></td><td id="tgi0pp_2143"><p>2</p></td></tr><tr id="tgi0pp_2144"><td id="tgi0pp_2145"><p>2</p></td><td id="tgi0pp_2146"><p>minh</p></td><td id="tgi0pp_2147"><p>minh@example.com</p></td><td id="tgi0pp_2148"><p>None</p></td><td id="tgi0pp_2149"><p>None</p></td><td id="tgi0pp_2150"><p>4</p></td><td id="tgi0pp_2151"><p>ha@example.com</p></td><td id="tgi0pp_2152"><p>family</p></td><td id="tgi0pp_2153"><p>2</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="users-without-emergency-contacts_2" data-toc="users-without-emergency-contacts_2">Trouver les utilisateurs sans contacts d'urgence</h3><div class="code-block" data-lang="sql">
SELECT uid, username, email
FROM users
WHERE uid NOT IN (SELECT uid 
                 FROM contacts
                 WHERE type = 'emergency');
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2155"><thead><tr class="ijRowHead" id="tgi0pp_2156"><th id="tgi0pp_2157"><p>uid</p></th><th id="tgi0pp_2158"><p>username</p></th><th id="tgi0pp_2159"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_2160"><td id="tgi0pp_2161"><p>2</p></td><td id="tgi0pp_2162"><p>minh</p></td><td id="tgi0pp_2163"><p>minh@example.com</p></td></tr></tbody></table></div><div class="code-block" data-lang="sql">
SELECT users.uid, username, email
FROM users LEFT JOIN (SELECT uid 
                     FROM contacts
                     WHERE type = 'emergency') AS temp
    ON users.uid = temp.uid
WHERE temp.uid IS NULL;
</div><div class="table-wrapper"><table class="wide" id="tgi0pp_2165"><thead><tr class="ijRowHead" id="tgi0pp_2166"><th id="tgi0pp_2167"><p>uid</p></th><th id="tgi0pp_2168"><p>username</p></th><th id="tgi0pp_2169"><p>email</p></th></tr></thead><tbody><tr id="tgi0pp_2170"><td id="tgi0pp_2171"><p>2</p></td><td id="tgi0pp_2172"><p>minh</p></td><td id="tgi0pp_2173"><p>minh@example.com</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="comment-traitons-nous-les-relations-plusieurs-plusieurs" data-toc="comment-traitons-nous-les-relations-plusieurs-plusieurs">Comment traitons-nous les relations plusieurs &agrave; plusieurs ?</h2><ul class="list _bullet" id="tgi0pp_2174"><li class="list__item" id="tgi0pp_2175"><p>Dans une base de donn&eacute;es relationnelle, nous avons besoin d'une table suppl&eacute;mentaire entre les 2 tables. </p><ul class="list _bullet" id="tgi0pp_2176"><li class="list__item" id="tgi0pp_2177"><p>Par exemple, nous avons besoin d'une table entre &quot;Users&quot; et &quot;Contacts&quot;, contenant des cl&eacute;s &eacute;trang&egrave;res pour les ID d'utilisateur et les ID de contact.</p></li></ul></li><li class="list__item" id="tgi0pp_2178"><p>Comment r&eacute;cup&eacute;rons-nous toutes les donn&eacute;es ? </p><ul class="list _bullet" id="tgi0pp_2179"><li class="list__item" id="tgi0pp_2180"><p>Avec 2 jointures.</p></li></ul></li><li class="list__item" id="tgi0pp_2181"><p>Qu'en est-il des autres mod&egrave;les de donn&eacute;es ? </p><ul class="list _bullet" id="tgi0pp_2182"><li class="list__item" id="tgi0pp_2183"><p>Avec des tableaux ?</p></li><li class="list__item" id="tgi0pp_2184"><p>Avec JSONB ?</p></li></ul></li></ul><p id="tgi0pp_2185"><span class="control" id="tgi0pp_2186">Il n'y a pas de solutions miracles pour les relations plusieurs &agrave; plusieurs</span></p></section><div class="last-modified">Last modified: 26 avril 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="denormalisation.html" class="navigation-links__prev">D&eacute;normalisation</a><a href="diagrammes-d-etats.html" class="navigation-links__next">Diagrammes d'&eacute;tat</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>